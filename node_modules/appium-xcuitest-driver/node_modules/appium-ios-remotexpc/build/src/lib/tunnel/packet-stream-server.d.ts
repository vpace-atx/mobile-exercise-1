import type { PacketConsumer } from 'appium-ios-tuntap';
import { EventEmitter } from 'events';
/**
 * Server that exposes packet streaming from a tunnel over TCP
 * This allows cross-process access to tunnel packet streams
 */
export declare class PacketStreamServer extends EventEmitter {
    private readonly port;
    private server;
    private readonly clients;
    private packetConsumer;
    constructor(port: number);
    /**
     * Start the packet stream server
     * @throws {Error} If server is already started
     */
    start(): Promise<void>;
    stop(): Promise<void>;
    getPacketConsumer(): PacketConsumer | null;
    /**
     * Handle new client connection
     */
    private handleClientConnection;
    /**
     * Create packet consumer that broadcasts packets to all connected clients
     */
    private createPacketConsumer;
    /**
     * Broadcast packet to all connected clients
     */
    private broadcastPacket;
    /**
     * Create a message buffer with length prefix
     */
    private createMessage;
}
//# sourceMappingURL=packet-stream-server.d.ts.map